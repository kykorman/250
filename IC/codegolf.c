#include <stdio.h>
#include <string.h>
#include <stdlib.h>
typedef struct box *li;typedef struct box sb;struct box{int a;double b;li next;};li gLA(li L,int x){li m=L;while(m!=NULL){if(m->a==x)return m;m=m->next;}return NULL;}li gLB(li L,double x){li m=L;while(m!=NULL){if(m->b==x)return m;m=m->next;}return NULL;}li rTO(li L,li ptr){if(ptr==L){L=L->next;free(ptr);}else{li m=L;while(m->next!=ptr)m=m->next;m->next=ptr->next;free(ptr);}return L;}double mV(li L){li m=L;double max=m->b;while(m!=NULL){if(max<m->b)max=m->b;m=m->next;}return max;}li mL(li L){double max=mV(L);li tmp=gLB(L,max);return tmp;}li make(sb tmp){li nB=malloc(sizeof(sb));nB->a=tmp.a;nB->b=tmp.b;nB->next=NULL;return nB;}li iF(li L, sb tmp){li nB=make(tmp);if(L==NULL){L=nB;}else{nB->next=L;L=nB;}return L;}void pL(li L){while(L!=NULL){li mxLoc=mL(L);printf("#%d:$%.2lf\n",mxLoc->a,mxLoc->b);L=rTO(L,mxLoc);}}int main(){li L=NULL;sb tmp;char j;while(scanf("%c%d",&j,&tmp.a)!=EOF){char tmpC;scanf("%c%c",&tmpC,&j);if(tmpC==':'){scanf("%lf%c",&tmp.b,&j);L=iF(L,tmp);}else{int pT;double am;scanf("%c%d%c%c%lf%c",&j,&pT,&j,&j,&am,&j);li pr=gLA(L,tmp.a);li pe=gLA(L,pT);pr->b=pr->b-am;pe->b=pe->b+am;}}pL(L);return 0;}
